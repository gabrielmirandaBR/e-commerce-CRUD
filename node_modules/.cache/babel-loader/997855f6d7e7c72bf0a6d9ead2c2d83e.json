{"ast":null,"code":"import { REQUEST_PRODUCTS, REQUEST_PRODUCTS_ERROR, REQUEST_PRODUCTS_SUCCESS, REQUEST_FILTERED_PRODUCTS_SUCCESS, GET_PRODUCTS_DETAILS, REQUEST_CATEGORIES_SUCCESS, REQUEST_CATEGORIES, REQUEST_CATEGORIES_ERROR, BUY_PRODUCT, REMOVE_PRODUCT } from '../actions';\nconst INITIAL_MARKET_STATE = {\n  payload: {\n    products: [],\n    filteredProducts: [],\n    productDetails: {},\n    productsInShoppingCart: []\n  },\n  error: null,\n  isFetching: false\n};\n\nfunction marketReducer(state = INITIAL_MARKET_STATE, action) {\n  switch (action.type) {\n    case REQUEST_PRODUCTS:\n      return { ...state,\n        isFetching: true\n      };\n\n    case REQUEST_PRODUCTS_SUCCESS:\n      return { ...state,\n        payload: { ...state.payload,\n          products: action.data.results\n        },\n        isFetching: false\n      };\n\n    case REQUEST_PRODUCTS_ERROR:\n      return { ...state,\n        error: action.error,\n        isFetching: false\n      };\n\n    case REQUEST_FILTERED_PRODUCTS_SUCCESS:\n      return { ...state,\n        payload: { ...state.payload,\n          filteredProducts: action.data.results\n        },\n        isFetching: false\n      };\n\n    case GET_PRODUCTS_DETAILS:\n      return { ...state,\n        payload: { ...state.payload,\n          productDetails: action.item\n        }\n      };\n\n    case REQUEST_CATEGORIES:\n      return { ...state,\n        isFetching: true\n      };\n\n    case REQUEST_CATEGORIES_SUCCESS:\n      return { ...state,\n        payload: { ...state.payload,\n          productsCategories: action.data\n        },\n        isFetching: false\n      };\n\n    case REQUEST_CATEGORIES_ERROR:\n      return { ...state,\n        error: action.error,\n        isFetching: false\n      };\n\n    case BUY_PRODUCT:\n      if (state.payload.productsInShoppingCart.forEach(item => item.id === action.item.id)) {\n        let quantity = 1; // eslint-disable-next-line no-return-assign\n\n        return { ...state,\n          payload: { ...state.payload,\n            productsInShoppingCart: [...state.payload.productsInShoppingCart, quantity += 1]\n          }\n        };\n      }\n\n      return { ...state,\n        payload: { ...state.payload,\n          productsInShoppingCart: [...state.payload.productsInShoppingCart]\n        }\n      };\n\n    case REMOVE_PRODUCT:\n      return { ...state,\n        payload: { ...state.payload,\n          productsInShoppingCart: state.payload.productsInShoppingCart.filter((_product, index) => index !== action.id)\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default marketReducer;","map":{"version":3,"sources":["/home/gabriel/Documentos/TRYBE/desafios-processos-seletivos/easy_live_challenge/marketplace/src/redux/reducers/market.js"],"names":["REQUEST_PRODUCTS","REQUEST_PRODUCTS_ERROR","REQUEST_PRODUCTS_SUCCESS","REQUEST_FILTERED_PRODUCTS_SUCCESS","GET_PRODUCTS_DETAILS","REQUEST_CATEGORIES_SUCCESS","REQUEST_CATEGORIES","REQUEST_CATEGORIES_ERROR","BUY_PRODUCT","REMOVE_PRODUCT","INITIAL_MARKET_STATE","payload","products","filteredProducts","productDetails","productsInShoppingCart","error","isFetching","marketReducer","state","action","type","data","results","item","productsCategories","forEach","id","quantity","filter","_product","index"],"mappings":"AAAA,SACCA,gBADD,EAECC,sBAFD,EAGCC,wBAHD,EAICC,iCAJD,EAKCC,oBALD,EAMCC,0BAND,EAOCC,kBAPD,EAQCC,wBARD,EASCC,WATD,EAUCC,cAVD,QAWO,YAXP;AAaA,MAAMC,oBAAoB,GAAG;AAC5BC,EAAAA,OAAO,EAAE;AACRC,IAAAA,QAAQ,EAAE,EADF;AAERC,IAAAA,gBAAgB,EAAE,EAFV;AAGRC,IAAAA,cAAc,EAAE,EAHR;AAIRC,IAAAA,sBAAsB,EAAE;AAJhB,GADmB;AAO5BC,EAAAA,KAAK,EAAE,IAPqB;AAQ5BC,EAAAA,UAAU,EAAE;AARgB,CAA7B;;AAWA,SAASC,aAAT,CAAuBC,KAAK,GAAGT,oBAA/B,EAAqDU,MAArD,EAA6D;AAC5D,UAAQA,MAAM,CAACC,IAAf;AACC,SAAKrB,gBAAL;AACC,aAAO,EACN,GAAGmB,KADG;AAENF,QAAAA,UAAU,EAAE;AAFN,OAAP;;AAKD,SAAKf,wBAAL;AACC,aAAO,EACN,GAAGiB,KADG;AAENR,QAAAA,OAAO,EAAE,EACR,GAAGQ,KAAK,CAACR,OADD;AAERC,UAAAA,QAAQ,EAAEQ,MAAM,CAACE,IAAP,CAAYC;AAFd,SAFH;AAMNN,QAAAA,UAAU,EAAE;AANN,OAAP;;AASD,SAAKhB,sBAAL;AACC,aAAO,EACN,GAAGkB,KADG;AAENH,QAAAA,KAAK,EAAEI,MAAM,CAACJ,KAFR;AAGNC,QAAAA,UAAU,EAAE;AAHN,OAAP;;AAMD,SAAKd,iCAAL;AACC,aAAO,EACN,GAAGgB,KADG;AAENR,QAAAA,OAAO,EAAE,EACR,GAAGQ,KAAK,CAACR,OADD;AAERE,UAAAA,gBAAgB,EAAEO,MAAM,CAACE,IAAP,CAAYC;AAFtB,SAFH;AAMNN,QAAAA,UAAU,EAAE;AANN,OAAP;;AASD,SAAKb,oBAAL;AACC,aAAO,EACN,GAAGe,KADG;AAENR,QAAAA,OAAO,EAAE,EACR,GAAGQ,KAAK,CAACR,OADD;AAERG,UAAAA,cAAc,EAAEM,MAAM,CAACI;AAFf;AAFH,OAAP;;AAQD,SAAKlB,kBAAL;AACC,aAAO,EACN,GAAGa,KADG;AAENF,QAAAA,UAAU,EAAE;AAFN,OAAP;;AAKD,SAAKZ,0BAAL;AACC,aAAO,EACN,GAAGc,KADG;AAENR,QAAAA,OAAO,EAAE,EACR,GAAGQ,KAAK,CAACR,OADD;AAERc,UAAAA,kBAAkB,EAAEL,MAAM,CAACE;AAFnB,SAFH;AAMNL,QAAAA,UAAU,EAAE;AANN,OAAP;;AASD,SAAKV,wBAAL;AACC,aAAO,EACN,GAAGY,KADG;AAENH,QAAAA,KAAK,EAAEI,MAAM,CAACJ,KAFR;AAGNC,QAAAA,UAAU,EAAE;AAHN,OAAP;;AAMD,SAAKT,WAAL;AACC,UAAGW,KAAK,CAACR,OAAN,CAAcI,sBAAd,CAAqCW,OAArC,CAA8CF,IAAD,IAAUA,IAAI,CAACG,EAAL,KAAYP,MAAM,CAACI,IAAP,CAAYG,EAA/E,CAAH,EAAwF;AACvF,YAAIC,QAAQ,GAAG,CAAf,CADuF,CAEvF;;AACA,eAAO,EACN,GAAGT,KADG;AAENR,UAAAA,OAAO,EAAE,EACR,GAAGQ,KAAK,CAACR,OADD;AAERI,YAAAA,sBAAsB,EAAE,CACvB,GAAGI,KAAK,CAACR,OAAN,CAAcI,sBADM,EAEvBa,QAAQ,IAAI,CAFW;AAFhB;AAFH,SAAP;AAUA;;AACA,aAAO,EACN,GAAGT,KADG;AAENR,QAAAA,OAAO,EAAE,EACR,GAAGQ,KAAK,CAACR,OADD;AAERI,UAAAA,sBAAsB,EAAE,CACvB,GAAGI,KAAK,CAACR,OAAN,CAAcI,sBADM;AAFhB;AAFH,OAAP;;AAWF,SAAKN,cAAL;AACC,aAAO,EACN,GAAGU,KADG;AAENR,QAAAA,OAAO,EAAE,EACR,GAAGQ,KAAK,CAACR,OADD;AAERI,UAAAA,sBAAsB,EAAEI,KAAK,CAACR,OAAN,CAAcI,sBAAd,CAAqCc,MAArC,CACvB,CAACC,QAAD,EAAWC,KAAX,KAAqBA,KAAK,KAAKX,MAAM,CAACO,EADf;AAFhB;AAFH,OAAP;;AAUD;AACC,aAAOR,KAAP;AAxGF;AA0GA;;AAED,eAAeD,aAAf","sourcesContent":["import {\n\tREQUEST_PRODUCTS,\n\tREQUEST_PRODUCTS_ERROR,\n\tREQUEST_PRODUCTS_SUCCESS,\n\tREQUEST_FILTERED_PRODUCTS_SUCCESS,\n\tGET_PRODUCTS_DETAILS,\n\tREQUEST_CATEGORIES_SUCCESS,\n\tREQUEST_CATEGORIES,\n\tREQUEST_CATEGORIES_ERROR,\n\tBUY_PRODUCT,\n\tREMOVE_PRODUCT,\n} from '../actions';\n\nconst INITIAL_MARKET_STATE = {\n\tpayload: {\n\t\tproducts: [],\n\t\tfilteredProducts: [],\n\t\tproductDetails: {},\n\t\tproductsInShoppingCart: [],\n\t},\n\terror: null,\n\tisFetching: false,\n};\n\nfunction marketReducer(state = INITIAL_MARKET_STATE, action) {\n\tswitch (action.type) {\n\t\tcase REQUEST_PRODUCTS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: true,\n\t\t\t};\n\n\t\tcase REQUEST_PRODUCTS_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpayload: {\n\t\t\t\t\t...state.payload,\n\t\t\t\t\tproducts: action.data.results,\n\t\t\t\t},\n\t\t\t\tisFetching: false,\n\t\t\t};\n\n\t\tcase REQUEST_PRODUCTS_ERROR:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\terror: action.error,\n\t\t\t\tisFetching: false,\n\t\t\t};\n\n\t\tcase REQUEST_FILTERED_PRODUCTS_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpayload: {\n\t\t\t\t\t...state.payload,\n\t\t\t\t\tfilteredProducts: action.data.results,\n\t\t\t\t},\n\t\t\t\tisFetching: false,\n\t\t\t};\n\n\t\tcase GET_PRODUCTS_DETAILS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpayload: {\n\t\t\t\t\t...state.payload,\n\t\t\t\t\tproductDetails: action.item,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase REQUEST_CATEGORIES:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: true,\n\t\t\t};\n\n\t\tcase REQUEST_CATEGORIES_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpayload: {\n\t\t\t\t\t...state.payload,\n\t\t\t\t\tproductsCategories: action.data,\n\t\t\t\t},\n\t\t\t\tisFetching: false,\n\t\t\t};\n\n\t\tcase REQUEST_CATEGORIES_ERROR:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\terror: action.error,\n\t\t\t\tisFetching: false,\n\t\t\t};\n\n\t\tcase BUY_PRODUCT:\n\t\t\tif(state.payload.productsInShoppingCart.forEach((item) => item.id === action.item.id )) {\n\t\t\t\tlet quantity = 1;\n\t\t\t\t// eslint-disable-next-line no-return-assign\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\t...state.payload,\n\t\t\t\t\t\tproductsInShoppingCart: [\n\t\t\t\t\t\t\t...state.payload.productsInShoppingCart,\n\t\t\t\t\t\t\tquantity += 1\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\t...state.payload,\n\t\t\t\t\t\tproductsInShoppingCart: [\n\t\t\t\t\t\t\t...state.payload.productsInShoppingCart,\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\n\n\t\tcase REMOVE_PRODUCT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpayload: {\n\t\t\t\t\t...state.payload,\n\t\t\t\t\tproductsInShoppingCart: state.payload.productsInShoppingCart.filter(\n\t\t\t\t\t\t(_product, index) => index !== action.id\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport default marketReducer;\n"]},"metadata":{},"sourceType":"module"}